2026-02-17 â€” Pre-compaction durable memory flush

Key persistent items to keep before compaction:

- Heartbeat / scheduling
  - Agent heartbeat interval updated to 60 minutes (openclaw.json).
  - Moltbook Post Monitor cron job interval changed from 30m to 120m (job id 4de3bd86-96ef-495b-abbe-23bf1f2f2e8f).
  - Daily GitHub Trending Report scheduled at 07:45 PT (cron expr "45 7 * * *", job id d0c8d7a6-...).

- Model / auth changes
  - Kimi API token updated in plugins.entries.kimi-claw.config.bridge.token (sk-kimi-m4B3...ohW2puN). Kimi plugin enabled and primary model switched to kimi-coding/k2p5 temporarily, then to google/gemini-2.5-pro; later session switched to copilot-proxy/gpt-5-mini (system message).
  - AiRanger.dev access: obtained fresh JWT via browser, attempted model inventory; repeated "Invalid or expired token" errors across sub-agent batches; inventory ultimately canceled and sub-agents cleaned up.

- System administration / packages
  - Granted passwordless sudo for approved commands; tested with `sudo apt update`.
  - Performed system package maintenance: apt update/upgrade, removed nvidia-firmware via autoremove, upgraded gcc-11 toolchain (cpp-11/g++-11/gcc-11 libs) successfully.
  - Installed Ansible and Python dependencies (ansible, community collections, proxmoxer, requests).

- Second-Brain / Obsidian MCP deployment & troubleshooting
  - LXC container hosting MCP at 192.168.1.203 (CT/host: mcp-test201) running Docker stack: nginx-gateway, obsidian-mcp, redis-cache, prometheus, grafana, cc-edit.
  - Observed obsidian-mcp crash loop: error "Already connected to a transport" in server.js; root cause: single McpServer instance reused per SSE connection.
  - Patch applied inside container: refactored to factory pattern creating a new McpServer per connection; restarted container; verified connectivity via mcporter.
  - Verified MCP tools and created skills: initial tools (cache_set/get/delete, redis_stats, health_check), monitoring skills (prometheus_get_targets, prometheus_get_alerts, prometheus_query, grafana_get_health, grafana_list_dashboards), and Obsidian skills.

- Skills & automation
  - Created and placed skill files in workspace (ansible/skills/): prometheus-monitor.mcp.md, grafana-monitor.mcp.md, proxmox-admin.mcp.md, network-docs-search.mcp.md, ceph-operations.mcp.md, user_context.mcp.md, searxng-search.mcp.md, plus others.
  - Deployed Redis-backed document store for Obsidian skills (key patterns like doc:proxmox:*, doc:ceph:*, doc:network:*, doc:runbook:*). Provided cache_set mechanism to load docs.
  - Created daily GitHub trending report script and tested sample run (top 5 sample generated), history recorded.

- Users / contexts
  - Created user context entries (Redis keys):
    - jenny_58645 -> user id 1372233289590505524; initial history entry created for 2026-02-17.
    - Synchronic1 -> user id 1060975411103805440; initial history entry created for 2026-02-17.
  - user_context skill created (tools: user_context_add_entry, user_context_get_history, user_context_search_history) to log and query per-user histories.

- Artifacts & playbook
  - Generated self-extracting Ansible installer: install-complete-ansible-playbook.sh and USAGE_GUIDE.txt in workspace artifacts; playbook files scaffolding available under ~/second-brain-ansible when extracted.

- Notes / next actions (persisted):
  - Recommend committing patched obsidian-mcp container (docker commit obsidian-mcp obsidian-mcp:fixed) or persist server.js via a mounted volume to avoid losing patch on rebuild.
  - If an Obsidian vault is later mounted on CT 203, update skills to query obsidian.search()/obsidian.get_note() directly instead of Redis keys.
  - Continue monitoring mcporter SSE endpoint and Grafana/Prometheus dashboards; new MCP skills available for monitoring.

End of flush.
